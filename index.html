<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÅ –°–∏–º—É–ª—è—Ç–æ—Ä –∫–µ–π—Å–æ–≤ —Å —Ñ–∏–≥—É—Ä–∫–∞–º–∏ üéÅ</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ffcc00;
            --secondary-color: #ff6b00;
            --dark-bg: #1a1a1a;
            --darker-bg: #121212;
            --item-bg: #333;
            --success-color: #33cc33;
            --danger-color: #ff3333;
            --rare-color: #4d88ff;
            --epic-color: #b347ea;
            --legendary-color: #ffaa00;
            --mythic-color: #ff3366;
            --special-color: #33cc99;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--dark-bg);
            color: white;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background-image: radial-gradient(circle at 50% 50%, #2a2a2a 0%, #1a1a1a 100%);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.3);
            font-size: 2.5rem;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            padding: 10px 0;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #333;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 25px;
            cursor: pointer;
            background-color: #333;
            border: none;
            color: white;
            font-weight: bold;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            transition: all 0.3s;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background: var(--primary-color);
            transition: all 0.3s;
            transform: translateX(-50%);
        }
        
        .tab.active {
            background-color: #444;
            color: var(--primary-color);
        }
        
        .tab.active::after {
            width: 100%;
        }
        
        .tab:hover:not(.active) {
            background-color: #444;
            color: var(--primary-color);
        }
        
        .tab-badge {
            background-color: var(--danger-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin-left: 5px;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
            padding: 20px 0;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .balance {
            background-color: #333;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .balance-item {
            display: flex;
            align-items: center;
            background-color: #444;
            padding: 8px 15px;
            border-radius: 20px;
        }
        
        .balance-icon {
            font-size: 1.2rem;
            margin-right: 8px;
            color: var(--primary-color);
        }
        
        .cases-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .case {
            background: linear-gradient(145deg, #3a3a3a, #2e2e2e);
            border-radius: 12px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            border: 2px solid #444;
        }
        
        .case:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: var(--primary-color);
        }
        
        .case::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0) 30%,
                rgba(255, 255, 255, 0.1) 45%,
                rgba(255, 255, 255, 0) 60%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            transition: all 0.5s;
        }
        
        .case:hover::before {
            left: 100%;
            top: 100%;
        }
        
        .case-img-container {
            position: relative;
            width: 100%;
            height: 180px;
            margin-bottom: 15px;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #222;
            font-size: 80px;
        }
        
        .case img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .case:hover img {
            transform: scale(1.05);
        }
        
        .case h3 {
            margin: 10px 0 5px;
            font-size: 1.2rem;
            text-align: center;
        }
        
        .case .price {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .case .price .key-icon {
            margin-right: 5px;
        }
        
        .case .limited {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--danger-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .rarity {
            position: absolute;
            bottom: 10px;
            left: 10px;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .common { background-color: #aaa; color: #333; }
        .rare { background-color: var(--rare-color); color: white; }
        .epic { background-color: var(--epic-color); color: white; }
        .legendary { background-color: var(--legendary-color); color: #333; }
        .mythic { background-color: var(--mythic-color); color: white; }
        .special { background-color: var(--special-color); color: white; }
        
        .animation-container {
            height: 200px;
            overflow: hidden;
            position: relative;
            margin: 30px 0;
            background-color: #222;
            border-radius: 10px;
            display: none;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        .animation-items {
            display: flex;
            position: absolute;
            left: 0;
            transition: left 0.1s;
            height: 100%;
        }
        
        .animation-item {
            width: 180px;
            height: 100%;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #333;
            margin-right: 5px;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 2px solid #444;
            font-size: 80px;
        }
        
        .animation-item.highlight {
            animation: highlight 0.5s infinite alternate;
        }
        
        @keyframes highlight {
            from { border-color: #444; box-shadow: none; }
            to { border-color: var(--primary-color); box-shadow: 0 0 20px var(--primary-color); }
        }
        
        .animation-item img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            transition: transform 0.3s;
        }
        
        .animation-item .name {
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
            padding: 0 5px;
        }
        
        .result {
            text-align: center;
            margin: 30px 0;
            font-size: 28px;
            color: var(--primary-color);
            display: none;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            display: none;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        
        button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0) 30%,
                rgba(255, 255, 255, 0.2) 45%,
                rgba(255, 255, 255, 0) 60%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            transition: all 0.5s;
        }
        
        button:hover::after {
            left: 100%;
            top: 100%;
        }
        
        .sell-btn {
            background-color: var(--danger-color);
            color: white;
        }
        
        .sell-btn:hover {
            background-color: #e60000;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 51, 51, 0.4);
        }
        
        .keep-btn {
            background-color: var(--success-color);
            color: white;
        }
        
        .keep-btn:hover {
            background-color: #29a329;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(51, 204, 51, 0.4);
        }
        
        .inventory-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
        }
        
        .inventory-item {
            background: linear-gradient(145deg, #3a3a3a, #2e2e2e);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
            border: 2px solid #444;
        }
        
        .inventory-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .inventory-item-img {
            width: 100px;
            height: 100px;
            border-radius: 5px;
            margin-bottom: 10px;
            border: 2px solid #444;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            margin: 0 auto 10px;
            background-color: #222;
        }
        
        .inventory-item .name {
            font-size: 14px;
            margin: 5px 0;
            font-weight: bold;
        }
        
        .inventory-item .price {
            color: var(--primary-color);
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .inventory-item .level {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: var(--primary-color);
            color: #333;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
        }
        
        .item-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .sell-inventory-btn {
            background-color: var(--danger-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            flex: 1;
            margin-right: 5px;
            transition: all 0.3s;
        }
        
        .sell-inventory-btn:hover {
            background-color: #e60000;
        }
        
        .upgrade-inventory-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            flex: 1;
            transition: all 0.3s;
        }
        
        .upgrade-inventory-btn:hover {
            background-color: #e05d00;
        }
        
        .upgrade-inventory-btn.selected {
            background-color: var(--primary-color);
            color: #333;
        }
        
        .upgrade-container {
            background-color: #333;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .upgrade-info {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #444;
            border-radius: 8px;
        }
        
        .upgrade-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background-color: #444;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .upgrade-item:hover {
            background-color: #555;
        }
        
        .upgrade-item-img {
            width: 80px;
            height: 80px;
            border-radius: 5px;
            margin-right: 15px;
            border: 2px solid #555;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            background-color: #333;
        }
        
        .upgrade-item-info {
            flex: 1;
        }
        
        .upgrade-item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .upgrade-item-stats {
            display: flex;
            font-size: 14px;
            color: #aaa;
            margin-bottom: 5px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .upgrade-item-price {
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .upgrade-item-chance {
            color: var(--success-color);
            font-weight: bold;
        }
        
        .upgrade-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .upgrade-btn:hover {
            background-color: #e05d00;
            transform: translateY(-2px);
        }
        
        .upgrade-btn:disabled {
            background-color: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: var(--primary-color);
            opacity: 0;
            animation: confetti-fall 5s linear forwards;
            z-index: 1000;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: #333;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
            animation: modalAppear 0.5s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        @keyframes modalAppear {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .modal-title {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .modal-text {
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .modal-close:hover {
            color: var(--primary-color);
            transform: rotate(90deg);
        }
        
        .modal-item {
            margin: 20px 0;
            font-size: 60px;
        }
        
        .progress-bar {
            height: 20px;
            background-color: #444;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            width: 0%;
            transition: width 1s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
            font-weight: bold;
        }
        
        .quests-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .quest {
            background-color: #333;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            border-left: 4px solid var(--primary-color);
        }
        
        .quest:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .quest-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .quest-description {
            margin-bottom: 15px;
            color: #ccc;
        }
        
        .quest-reward {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            color: var(--success-color);
            font-weight: bold;
        }
        
        .quest-reward-icon {
            margin-right: 5px;
        }
        
        .quest-progress {
            width: 100%;
            height: 8px;
            background-color: #444;
            border-radius: 4px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        
        .quest-progress-bar {
            height: 100%;
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            width: 0%;
            transition: width 0.5s;
        }
        
        .quest-complete-btn {
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            width: 100%;
        }
        
        .quest-complete-btn:hover {
            background-color: #29a329;
        }
        
        .quest-complete-btn:disabled {
            background-color: #666;
            cursor: not-allowed;
        }
        
        .daily-bonus {
            background-color: #333;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px dashed var(--primary-color);
        }
        
        .daily-bonus-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .daily-bonus-btn {
            background-color: var(--primary-color);
            color: #333;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 1.1rem;
        }
        
        .daily-bonus-btn:hover {
            background-color: #ffd633;
            transform: scale(1.05);
        }
        
        .daily-bonus-btn:disabled {
            background-color: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .cases-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .inventory-items {
                grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            }
            
            .animation-item {
                width: 150px;
            }
            
            .animation-item img {
                width: 100px;
                height: 100px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .tab {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .quests-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÅ –°–∏–º—É–ª—è—Ç–æ—Ä –∫–µ–π—Å–æ–≤ —Å —Ñ–∏–≥—É—Ä–∫–∞–º–∏ üéÅ</h1>
        
        <div class="balance">
            <div class="balance-item">
                <span class="balance-icon">üí∞</span>
                –ë–∞–ª–∞–Ω—Å: <span id="money">1000</span> ‚ÇΩ
            </div>
            <div class="balance-item">
                <span class="balance-icon">üéÅ</span>
                –û—Ç–∫—Ä—ã—Ç–æ: <span id="opened-cases">0</span>
            </div>
            <div class="balance-item">
                <span class="balance-icon">üîë</span>
                –ö–ª—é—á–∏: <span id="keys">0</span>
            </div>
            <div class="balance-item">
                <span class="balance-icon">‚≠ê</span>
                –û–ø—ã—Ç: <span id="xp">0</span>/<span id="next-level-xp">100</span>
            </div>
            <div class="balance-item">
                <span class="balance-icon">üèÜ</span>
                –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="openTab('cases-tab')">–ö–µ–π—Å—ã</button>
            <button class="tab" onclick="openTab('inventory-tab')">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
            <button class="tab" onclick="openTab('upgrade-tab')">–ê–ø–≥—Ä–µ–π–¥</button>
            <button class="tab" onclick="openTab('quests-tab')">
                –ó–∞–¥–∞–Ω–∏—è
                <span id="quests-badge" class="tab-badge" style="display: none;">0</span>
            </button>
        </div>
        
        <div id="cases-tab" class="tab-content active">
            <div class="daily-bonus">
                <div class="daily-bonus-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</div>
                <p>–í–µ—Ä–Ω–∏—Ç–µ—Å—å –∑–∞–≤—Ç—Ä–∞, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É!</p>
                <button id="daily-bonus-btn" class="daily-bonus-btn" disabled>–ü–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ 00:00:00</button>
            </div>
            
            <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–µ–π—Å—ã</h2>
            <div class="cases-container">
                <div class="case" onclick="openCase(0)">
                    <div class="case-img-container">üì¶</div>
                    <h3>–û–±—ã—á–Ω—ã–π –∫–µ–π—Å</h3>
                    <div class="price">100 ‚ÇΩ</div>
                    <div class="rarity common">–û–±—ã—á–Ω—ã–π</div>
                </div>
                
                <div class="case" onclick="openCase(1)">
                    <div class="case-img-container">üéÅ</div>
                    <h3>–†–µ–¥–∫–∏–π –∫–µ–π—Å</h3>
                    <div class="price">300 ‚ÇΩ</div>
                    <div class="rarity rare">–†–µ–¥–∫–∏–π</div>
                </div>
                
                <div class="case" onclick="openCase(2)">
                    <div class="case-img-container">üíé</div>
                    <h3>–≠–ø–∏—á–µ—Å–∫–∏–π –∫–µ–π—Å</h3>
                    <div class="price">500 ‚ÇΩ</div>
                    <div class="rarity epic">–≠–ø–∏—á–µ—Å–∫–∏–π</div>
                    <div class="limited">–û—Å—Ç–∞–ª–æ—Å—å: <span id="limited-count">5</span></div>
                </div>
                
                <div class="case" onclick="openCase(3)">
                    <div class="case-img-container">üèÜ</div>
                    <h3>–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–µ–π—Å</h3>
                    <div class="price">1000 ‚ÇΩ</div>
                    <div class="rarity legendary">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π</div>
                    <div class="limited">–û—Å—Ç–∞–ª–æ—Å—å: <span id="legendary-count">3</span></div>
                </div>
                
                <div class="case" onclick="openCase(4)">
                    <div class="case-img-container">üëë</div>
                    <h3>–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π –∫–µ–π—Å</h3>
                    <div class="price"><span class="key-icon">üîë</span> 1</div>
                    <div class="rarity mythic">–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π</div>
                    <div class="limited">–û—Å—Ç–∞–ª–æ—Å—å: <span id="mythic-count">2</span></div>
                </div>
                
                <div class="case" onclick="openCase(5)">
                    <div class="case-img-container">üé≤</div>
                    <h3>–°–ª—É—á–∞–π–Ω—ã–π –∫–µ–π—Å</h3>
                    <div class="price">200 ‚ÇΩ</div>
                    <div class="rarity special">–û—Å–æ–±—ã–π</div>
                </div>
            </div>
            
            <div class="animation-container" id="animation-container">
                <div class="animation-items" id="animation-items"></div>
            </div>
            
            <div class="result" id="result"></div>
            
            <div class="buttons" id="buttons">
                <button class="sell-btn" onclick="sellItem()">–ü—Ä–æ–¥–∞—Ç—å</button>
                <button class="keep-btn" onclick="keepItem()">–û—Å—Ç–∞–≤–∏—Ç—å</button>
            </div>
        </div>
        
        <div id="inventory-tab" class="tab-content">
            <h2>–í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
            <p id="empty-inventory" style="text-align: center; color: #aaa; display: none;">–í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–µ–π—Å—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ñ–∏–≥—É—Ä–∫–∏!</p>
            <div class="inventory-items" id="inventory-items">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ñ–∏–≥—É—Ä–∫–∏ -->
            </div>
        </div>
        
        <div id="upgrade-tab" class="tab-content">
            <h2>–£–ª—É—á—à–µ–Ω–∏–µ —Ñ–∏–≥—É—Ä–æ–∫</h2>
            <div class="upgrade-container">
                <div class="upgrade-info">
                    <h3>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h3>
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ –¥–≤–µ —Ñ–∏–≥—É—Ä–∫–∏ –æ–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–ª—è –ø–æ–ø—ã—Ç–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è. –ü—Ä–∏ —É—Å–ø–µ—Ö–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Ñ–∏–≥—É—Ä–∫—É —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è, –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ - –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –æ–±–µ —Ñ–∏–≥—É—Ä–∫–∏.</p>
                    <div class="progress-bar">
                        <div class="progress" id="upgrade-progress">0%</div>
                    </div>
                    <p>–®–∞–Ω—Å —É—Å–ø–µ—Ö–∞: <span id="upgrade-chance">0</span>%</p>
                </div>
                
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–≥—É—Ä–∫–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è:</h3>
                <div id="upgrade-items">
                    <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç —Ñ–∏–≥—É—Ä–∫–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è -->
                </div>
                
                <button id="perform-upgrade" class="upgrade-btn" disabled onclick="performUpgrade()">–£–ª—É—á—à–∏—Ç—å</button>
            </div>
        </div>
        
        <div id="quests-tab" class="tab-content">
            <h2>–ó–∞–¥–∞–Ω–∏—è</h2>
            <p>–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—ã –∏ –æ–ø—ã—Ç!</p>
            
            <div class="quests-container" id="quests-container">
                <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –∑–∞–¥–∞–Ω–∏—è -->
            </div>
        </div>
    </div>
    
    <div id="upgrade-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <h2 class="modal-title" id="upgrade-modal-title">–†–µ–∑—É–ª—å—Ç–∞—Ç —É–ª—É—á—à–µ–Ω–∏—è</h2>
            <p class="modal-text" id="upgrade-modal-text"></p>
            <div class="modal-item" id="upgrade-modal-item"></div>
            <button class="upgrade-btn" onclick="closeModal()">OK</button>
        </div>
    </div>
    
    <div id="key-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <h2 class="modal-title">üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ</h2>
            <p class="modal-text">–í—ã –ø–æ–ª—É—á–∏–ª–∏ –∫–ª—é—á –æ—Ç –∫–µ–π—Å–∞!</p>
            <p>–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –æ–¥–∏–Ω –∫–µ–π—Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ.</p>
            <div class="modal-item">üîë</div>
            <button class="upgrade-btn" onclick="closeModal()">–û—Ç–ª–∏—á–Ω–æ!</button>
        </div>
    </div>
    
    <div id="daily-bonus-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <h2 class="modal-title">üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å üéÅ</h2>
            <p class="modal-text" id="daily-bonus-modal-text">–í—ã –ø–æ–ª—É—á–∏–ª–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å!</p>
            <div class="modal-item" id="daily-bonus-modal-item">üí∞</div>
            <button class="upgrade-btn" onclick="closeModal()">–°–ø–∞—Å–∏–±–æ!</button>
        </div>
    </div>
    
    <div id="quest-complete-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <h2 class="modal-title">üèÜ –ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ! üèÜ</h2>
            <p class="modal-text" id="quest-complete-modal-text"></p>
            <div class="modal-item" id="quest-complete-modal-item">üéÅ</div>
            <button class="upgrade-btn" onclick="closeModal()">–û—Ç–ª–∏—á–Ω–æ!</button>
        </div>
    </div>
    
    <div id="level-up-modal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <h2 class="modal-title">‚≠ê –£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω! ‚≠ê</h2>
            <p class="modal-text" id="level-up-modal-text">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è!</p>
            <div class="modal-item">üèÜ</div>
            <button class="upgrade-btn" onclick="closeModal()">–£—Ä–∞!</button>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –æ —Ñ–∏–≥—É—Ä–∫–∞—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–µ–π—Å–∞
        const caseItems = [
            // –û–±—ã—á–Ω—ã–π –∫–µ–π—Å (0)
            [
                { name: "–û–±—ã—á–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞ 1", price: 50, emoji: "üê≠", rarity: "common", level: 1, id: 1 },
                { name: "–û–±—ã—á–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞ 2", price: 70, emoji: "üêπ", rarity: "common", level: 1, id: 2 },
                { name: "–†–µ–¥–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞ 1", price: 150, emoji: "üê∞", rarity: "rare", level: 1, id: 3 },
                { name: "–†–µ–¥–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞ 2", price: 200, emoji: "ü¶ä", rarity: "rare", level: 1, id: 4 },
                { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 500, emoji: "üê≤", rarity: "legendary", level: 1, id: 5 }
            ],
            // –†–µ–¥–∫–∏–π –∫–µ–π—Å (1)
            [
                { name: "–†–µ–¥–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞ A", price: 200, emoji: "üêª", rarity: "rare", level: 1, id: 6 },
                { name: "–†–µ–¥–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞ B", price: 250, emoji: "üêº", rarity: "rare", level: 1, id: 7 },
                { name: "–≠–ø–∏—á–µ—Å–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞ X", price: 400, emoji: "ü¶Ñ", rarity: "epic", level: 1, id: 8 },
                { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞ Y", price: 800, emoji: "üêâ", rarity: "legendary", level: 1, id: 9 }
            ],
            // –≠–ø–∏—á–µ—Å–∫–∏–π –∫–µ–π—Å (2)
            [
                { name: "–≠–ø–∏—á–µ—Å–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞ 1", price: 400, emoji: "ü¶Å", rarity: "epic", level: 1, id: 10 },
                { name: "–≠–ø–∏—á–µ—Å–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞ 2", price: 600, emoji: "üêØ", rarity: "epic", level: 1, id: 11 },
                { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞ Z", price: 1000, emoji: "ü¶Ö", rarity: "legendary", level: 1, id: 12 },
                { name: "–ó–æ–ª–æ—Ç–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 2000, emoji: "üåü", rarity: "legendary", level: 1, id: 13 }
            ],
            // –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–µ–π—Å (3)
            [
                { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞ Alpha", price: 1000, emoji: "üëë", rarity: "legendary", level: 1, id: 14 },
                { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞ Beta", price: 1200, emoji: "ü¶∏", rarity: "legendary", level: 1, id: 15 },
                { name: "–ú–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 3000, emoji: "üßô", rarity: "mythic", level: 1, id: 16 },
                { name: "–ö–ª—é—á –æ—Ç –∫–µ–π—Å–∞", price: 0, emoji: "üîë", rarity: "special", level: 0, id: 17, isKey: true }
            ],
            // –ú–∏—Ñ–∏—á–µ—Å–∫–∏–π –∫–µ–π—Å (4)
            [
                { name: "–ú–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞ 1", price: 1500, emoji: "üßö", rarity: "mythic", level: 1, id: 18 },
                { name: "–ú–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞ 2", price: 2000, emoji: "üßú", rarity: "mythic", level: 1, id: 19 },
                { name: "–£–Ω–∏–∫–∞–ª—å–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 5000, emoji: "ü¶ö", rarity: "mythic", level: 1, id: 20 },
                { name: "–ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 10000, emoji: "üëº", rarity: "mythic", level: 1, id: 21 }
            ],
            // –°–ª—É—á–∞–π–Ω—ã–π –∫–µ–π—Å (5)
            [
                { name: "–û–±—ã—á–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 50, emoji: "üê∂", rarity: "common", level: 1, id: 22 },
                { name: "–†–µ–¥–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 200, emoji: "üê±", rarity: "rare", level: 1, id: 23 },
                { name: "–≠–ø–∏—á–µ—Å–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 500, emoji: "ü¶Å", rarity: "epic", level: 1, id: 24 },
                { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 1000, emoji: "ü¶Ñ", rarity: "legendary", level: 1, id: 25 },
                { name: "–ú–∏—Ñ–∏—á–µ—Å–∫–∞—è —Ñ–∏–≥—É—Ä–∫–∞", price: 2000, emoji: "üê≤", rarity: "mythic", level: 1, id: 26 }
            ]
        ];
        
        // –¶–µ–Ω—ã –∫–µ–π—Å–æ–≤
        const casePrices = [100, 300, 500, 1000, 0, 200];
        
        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–µ–π—Å–æ–≤
        let limitedCasesLeft = 5;
        let legendaryCasesLeft = 3;
        let mythicCasesLeft = 2;
        
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let money = 1000;
        let openedCases = 0;
        let keys = 0;
        let xp = 0;
        let level = 1;
        let nextLevelXp = 100;
        let inventory = [];
        let currentItem = null;
        let animationInterval = null;
        let animationSpeed = 30;
        let slowingDown = false;
        let currentPosition = 0;
        let targetPosition = 0;
        let selectedForUpgrade = [];
        let quests = [];
        let completedQuests = [];
        let lastDailyBonusDate = null;
        let dailyBonusAvailable = false;
        
        // –ö–≤–µ—Å—Ç—ã
        const allQuests = [
            {
                id: 1,
                title: "–ù–æ–≤–∏—á–æ–∫",
                description: "–û—Ç–∫—Ä–æ–π—Ç–µ 5 –∫–µ–π—Å–æ–≤",
                target: 5,
                current: 0,
                reward: { money: 500, xp: 50 },
                type: "open_cases"
            },
            {
                id: 2,
                title: "–ö–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä",
                description: "–°–æ–±–µ—Ä–∏—Ç–µ 10 —Ñ–∏–≥—É—Ä–æ–∫ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å",
                target: 10,
                current: 0,
                reward: { money: 1000, xp: 100 },
                type: "collect_items"
            },
            {
                id: 3,
                title: "–¢–æ—Ä–≥–æ–≤–µ—Ü",
                description: "–ü—Ä–æ–¥–∞–π—Ç–µ —Ñ–∏–≥—É—Ä–æ–∫ –Ω–∞ 2000 ‚ÇΩ",
                target: 2000,
                current: 0,
                reward: { money: 1000, xp: 150 },
                type: "sell_items"
            },
            {
                id: 4,
                title: "–£–ª—É—á—à–∞—Ç–µ–ª—å",
                description: "–£–ª—É—á—à–∏—Ç–µ 3 —Ñ–∏–≥—É—Ä–∫–∏",
                target: 3,
                current: 0,
                reward: { money: 1500, xp: 200 },
                type: "upgrade_items"
            },
            {
                id: 5,
                title: "–≠–∫—Å–ø–µ—Ä—Ç",
                description: "–û—Ç–∫—Ä–æ–π—Ç–µ 3 —Ä–µ–¥–∫–∏—Ö –∫–µ–π—Å–∞",
                target: 3,
                current: 0,
                reward: { money: 2000, xp: 300, keys: 1 },
                type: "open_rare_cases"
            },
            {
                id: 6,
                title: "–õ–µ–≥–µ–Ω–¥–∞",
                description: "–ü–æ–ª—É—á–∏—Ç–µ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—É—é —Ñ–∏–≥—É—Ä–∫—É",
                target: 1,
                current: 0,
                reward: { money: 3000, xp: 500, keys: 2 },
                type: "get_legendary"
            }
        ];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            generateQuests();
            checkDailyBonus();
            updateBalance();
            updateInventory();
            updateQuests();
            startDailyBonusTimer();
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            const gameData = {
                money,
                openedCases,
                keys,
                xp,
                level,
                nextLevelXp,
                inventory,
                limitedCasesLeft,
                legendaryCasesLeft,
                mythicCasesLeft,
                quests,
                completedQuests,
                lastDailyBonusDate,
                dailyBonusAvailable
            };
            
            localStorage.setItem('caseSimulatorSave', JSON.stringify(gameData));
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
        function loadGame() {
            const savedData = localStorage.getItem('caseSimulatorSave');
            
            if (savedData) {
                const gameData = JSON.parse(savedData);
                
                money = gameData.money || 1000;
                openedCases = gameData.openedCases || 0;
                keys = gameData.keys || 0;
                xp = gameData.xp || 0;
                level = gameData.level || 1;
                nextLevelXp = gameData.nextLevelXp || 100;
                inventory = gameData.inventory || [];
                limitedCasesLeft = gameData.limitedCasesLeft || 5;
                legendaryCasesLeft = gameData.legendaryCasesLeft || 3;
                mythicCasesLeft = gameData.mythicCasesLeft || 2;
                quests = gameData.quests || [];
                completedQuests = gameData.completedQuests || [];
                lastDailyBonusDate = gameData.lastDailyBonusDate ? new Date(gameData.lastDailyBonusDate) : null;
                dailyBonusAvailable = gameData.dailyBonusAvailable || false;
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
        function updateBalance() {
            document.getElementById('money').textContent = money;
            document.getElementById('opened-cases').textContent = openedCases;
            document.getElementById('limited-count').textContent = limitedCasesLeft;
            document.getElementById('legendary-count').textContent = legendaryCasesLeft;
            document.getElementById('mythic-count').textContent = mythicCasesLeft;
            document.getElementById('keys').textContent = keys;
            document.getElementById('xp').textContent = xp;
            document.getElementById('next-level-xp').textContent = nextLevelXp;
            document.getElementById('level').textContent = level;
            
            saveGame();
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function openTab(tabId) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –≤–∫–ª–∞–¥–æ–∫
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(tabId).classList.add('active');
            
            // –°–¥–µ–ª–∞—Ç—å –∫–Ω–æ–ø–∫—É –∞–∫—Ç–∏–≤–Ω–æ–π
            event.currentTarget.classList.add('active');
            
            // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É —É–ª—É—á—à–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª—è–µ–º –µ–µ
            if (tabId === 'upgrade-tab') {
                updateUpgradeTab();
            }
        }
        
        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–∞
        function openCase(caseIndex) {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∏ –∫–ª—é—á–µ–π
            if (caseIndex === 4) { // –ú–∏—Ñ–∏—á–µ—Å–∫–∏–π –∫–µ–π—Å —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á
                if (keys <= 0) {
                    alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª—é—á–µ–π!');
                    return;
                }
            } else if (money < casePrices[caseIndex] && keys === 0) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö –∫–µ–π—Å–æ–≤
            if (caseIndex === 2 && limitedCasesLeft <= 0) {
                alert('–≠–ø–∏—á–µ—Å–∫–∏–µ –∫–µ–π—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!');
                return;
            }
            
            if (caseIndex === 3 && legendaryCasesLeft <= 0) {
                alert('–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –∫–µ–π—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!');
                return;
            }
            
            if (caseIndex === 4 && mythicCasesLeft <= 0) {
                alert('–ú–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∫–µ–π—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!');
                return;
            }
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–ª—é—á –µ—Å–ª–∏ —ç—Ç–æ –º–∏—Ñ–∏—á–µ—Å–∫–∏–π –∫–µ–π—Å, –∏–Ω–∞—á–µ —Å–ø–∏—Å—ã–≤–∞–µ–º –¥–µ–Ω—å–≥–∏
            if (caseIndex === 4) {
                keys--;
            } else if (keys > 0 && confirm('–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á –≤–º–µ—Å—Ç–æ –¥–µ–Ω–µ–≥?')) {
                keys--;
            } else {
                money -= casePrices[caseIndex];
            }
            
            openedCases++;
            if (caseIndex === 2) limitedCasesLeft--;
            if (caseIndex === 3) legendaryCasesLeft--;
            if (caseIndex === 4) mythicCasesLeft--;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—ã—Ç –∑–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–∞
            addXp(10 * (caseIndex + 1));
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–≤–µ—Å—Ç—ã
            updateQuestProgress('open_cases', 1);
            if (caseIndex === 1 || caseIndex === 2 || caseIndex === 3) {
                updateQuestProgress('open_rare_cases', 1);
            }
            
            updateBalance();
            
            // –ó–∞–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –∫–µ–π—Å–æ–≤ –Ω–∞ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏
            document.querySelectorAll('.case').forEach(c => c.style.pointerEvents = 'none');
            
            // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
            prepareAnimation(caseIndex);
            
            // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
            startAnimation(caseIndex);
        }
        
        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
        function prepareAnimation(caseIndex) {
            const animationContainer = document.getElementById('animation-container');
            const animationItems = document.getElementById('animation-items');
            
            // –û—á–∏—Å—Ç–∏–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            animationItems.innerHTML = '';
            
            // –°–æ–∑–¥–∞–¥–∏–º –º–Ω–æ–≥–æ –∫–æ–ø–∏–π —Ñ–∏–≥—É—Ä–æ–∫ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
            const items = caseItems[caseIndex];
            for (let i = 0; i < 150; i++) {
                const item = items[Math.floor(Math.random() * items.length)];
                const itemElement = document.createElement('div');
                itemElement.className = 'animation-item';
                itemElement.innerHTML = `
                    <div style="font-size: 80px;">${item.emoji}</div>
                    <div class="name">${item.name}</div>
                `;
                animationItems.appendChild(itemElement);
            }
            
            // –ü–æ–∫–∞–∂–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–Ω–∏–º–∞—Ü–∏–∏
            animationContainer.style.display = 'block';
            
            // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –∫–Ω–æ–ø–∫–∏
            document.getElementById('result').style.display = 'none';
            document.getElementById('buttons').style.display = 'none';
        }
        
        // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
        function startAnimation(caseIndex) {
            const animationItems = document.getElementById('animation-items');
            const items = caseItems[caseIndex];
            
            // –í—ã—á–∏—Å–ª—è–µ–º —Ü–µ–ª–µ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (—Å–ª—É—á–∞–π–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å —É—á–µ—Ç–æ–º —Ä–µ–¥–∫–æ—Å—Ç–∏)
            let totalRarity = items.reduce((sum, item) => sum + getRarityValue(item.rarity), 0);
            let randomValue = Math.random() * totalRarity;
            let selectedItem = null;
            
            for (const item of items) {
                if (randomValue <= getRarityValue(item.rarity)) {
                    selectedItem = item;
                    break;
                }
                randomValue -= getRarityValue(item.rarity);
            }
            
            // –ï—Å–ª–∏ –ø–æ—á–µ–º—É-—Ç–æ –Ω–µ –≤—ã–±—Ä–∞–ª–∏ (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ), –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π
            if (!selectedItem) selectedItem = items[0];
            
            currentItem = selectedItem;
            
            // –í—ã—á–∏—Å–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é, –≥–¥–µ —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç –±—É–¥–µ—Ç –≤ —Ü–µ–Ω—Ç—Ä–µ
            const itemWidth = 185; // 180px + 5px margin-right
            const containerWidth = document.getElementById('animation-container').offsetWidth;
            const centerPosition = Math.floor(containerWidth / 2) - Math.floor(itemWidth / 2);
            
            // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∞–Ω–∏–º–∞—Ü–∏–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
            const animationItemsCount = animationItems.children.length;
            const searchStart = animationItemsCount - 30;
            let targetIndex = -1;
            
            // –ò—â–µ–º –Ω–∞—à –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö
            for (let i = searchStart; i < animationItemsCount; i++) {
                const nameElement = animationItems.children[i].querySelector('.name');
                if (nameElement && nameElement.textContent === selectedItem.name) {
                    targetIndex = i;
                    break;
                }
            }
            
            // –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ), –±–µ—Ä–µ–º –ø—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–π
            if (targetIndex === -1) targetIndex = animationItemsCount - 2;
            
            // –í—ã—á–∏—Å–ª—è–µ–º —Ü–µ–ª–µ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
            targetPosition = -(targetIndex * itemWidth - centerPosition);
            
            // –ù–∞—á–∏–Ω–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            currentPosition = 0;
            slowingDown = false;
            animationItems.style.left = currentPosition + 'px';
            
            if (animationInterval) clearInterval(animationInterval);
            
            // –î–æ–±–∞–≤–∏–º –Ω–µ–º–Ω–æ–≥–æ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –≤ —Å–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏
            const baseSpeed = 30;
            const speedVariation = Math.random() * 20 - 10; // –æ—Ç -10 –¥–æ +10
            animationSpeed = baseSpeed + speedVariation;
            
            animationInterval = setInterval(() => {
                // –ï—Å–ª–∏ –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª–∏ –∑–∞–º–µ–¥–ª—è—Ç—å—Å—è –∏ –ø—Ä–æ—à–ª–∏ 70% –ø—É—Ç–∏
                if (!slowingDown && currentPosition < targetPosition * 0.7) {
                    slowingDown = true;
                    animationSpeed = 150; // –ó–∞–º–µ–¥–ª—è–µ–º—Å—è
                    
                    // –ü–æ–¥—Å–≤–µ—Ç–∏–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å —Ç–∞–∫–∏–º –∂–µ –∏–º–µ–Ω–µ–º
                    const items = document.querySelectorAll('.animation-item');
                    items.forEach(item => {
                        const nameElement = item.querySelector('.name');
                        if (nameElement && nameElement.textContent === selectedItem.name) {
                            item.classList.add('highlight');
                        }
                    });
                }
                
                // –î–≤–∏–≥–∞–µ–º—Å—è –∫ —Ü–µ–ª–∏
                if (slowingDown) {
                    // –ü—Ä–∏–±–ª–∏–∂–∞–µ–º—Å—è –∫ —Ü–µ–ª–∏ —Å –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ–º
                    const distance = targetPosition - currentPosition;
                    currentPosition += distance * 0.1;
                    
                    // –ï—Å–ª–∏ –æ—á–µ–Ω—å –±–ª–∏–∑–∫–æ, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è
                    if (Math.abs(distance) < 5) {
                        currentPosition = targetPosition;
                        clearInterval(animationInterval);
                        animationItems.style.left = currentPosition + 'px';
                        showResult();
                        return;
                    }
                } else {
                    // –ë—ã—Å—Ç—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤ –Ω–∞—á–∞–ª–µ
                    currentPosition -= 30;
                }
                
                animationItems.style.left = currentPosition + 'px';
            }, animationSpeed);
        }
        
        // –ü–æ–ª—É—á–∏—Ç—å —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–¥–∫–æ—Å—Ç–∏
        function getRarityValue(rarity) {
            switch(rarity) {
                case 'common': return 60;
                case 'rare': return 25;
                case 'epic': return 10;
                case 'legendary': return 5;
                case 'mythic': return 2;
                case 'special': return 1;
                default: return 10;
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        function showResult() {
            const resultElement = document.getElementById('result');
            const buttonsElement = document.getElementById('buttons');
            
            resultElement.textContent = `üéâ –í—ã –ø–æ–ª—É—á–∏–ª–∏: ${currentItem.name} (${currentItem.price} ‚ÇΩ) üéâ`;
            resultElement.style.display = 'block';
            buttonsElement.style.display = 'flex';
            
            // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–µ–π—Å—ã
            document.querySelectorAll('.case').forEach(c => c.style.pointerEvents = 'auto');
            
            // –ï—Å–ª–∏ —ç—Ç–æ –∫–ª—é—á, –ø–æ–∫–∞–∂–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            if (currentItem.isKey) {
                keys++;
                updateBalance();
                setTimeout(() => {
                    document.getElementById('key-modal').style.display = 'flex';
                }, 1000);
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–≤–µ—Å—Ç –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–π —Ñ–∏–≥—É—Ä–∫–∏
            if (currentItem.rarity === 'legendary' || currentItem.rarity === 'mythic') {
                updateQuestProgress('get_legendary', 1);
            }
        }
        
        // –ü—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç
        function sellItem() {
            money += currentItem.price;
            updateBalance();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–≤–µ—Å—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∂—É
            updateQuestProgress('sell_items', currentItem.price);
            
            // –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–æ–¥–∞–∂–∏
            createConfetti(currentItem.rarity);
            
            hideResultElements();
        }
        
        // –û—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ
        function keepItem() {
            // –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é –æ–±—ä–µ–∫—Ç–∞, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∏–∑–º–µ–Ω—è—Ç—å level –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
            const itemCopy = JSON.parse(JSON.stringify(currentItem));
            inventory.push(itemCopy);
            updateInventory();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–≤–µ—Å—Ç –Ω–∞ —Å–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            updateQuestProgress('collect_items', 1);
            
            // –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–ª—É—á–µ–Ω–∏—è
            createConfetti(currentItem.rarity);
            
            hideResultElements();
        }
        
        // –°–∫—Ä—ã—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function hideResultElements() {
            document.getElementById('animation-container').style.display = 'none';
            document.getElementById('result').style.display = 'none';
            document.getElementById('buttons').style.display = 'none';
            
            // –£–±—Ä–∞—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É
            document.querySelectorAll('.animation-item').forEach(item => {
                item.classList.remove('highlight');
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        function updateInventory() {
            const inventoryItems = document.getElementById('inventory-items');
            const emptyInventory = document.getElementById('empty-inventory');
            inventoryItems.innerHTML = '';
            
            if (inventory.length === 0) {
                emptyInventory.style.display = 'block';
            } else {
                emptyInventory.style.display = 'none';
                
                inventory.forEach((item, index) => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'inventory-item';
                    itemElement.innerHTML = `
                        <div class="level">${item.level}</div>
                        <div class="inventory-item-img">${item.emoji}</div>
                        <div class="name">${item.name}</div>
                        <div class="price">${item.price * item.level} ‚ÇΩ</div>
                        <div class="item-actions">
                            <button class="sell-inventory-btn" onclick="sellInventoryItem(${index})">–ü—Ä–æ–¥–∞—Ç—å</button>
                            <button class="upgrade-inventory-btn ${selectedForUpgrade.some(selected => selected.index === index) ? 'selected' : ''}" 
                                    onclick="selectForUpgrade(${index})">
                                ${selectedForUpgrade.some(selected => selected.index === index) ? '‚úì' : '–í—ã–±—Ä–∞—Ç—å'}
                            </button>
                        </div>
                    `;
                    inventoryItems.appendChild(itemElement);
                });
            }
            
            saveGame();
        }
        
        // –ü—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        function sellInventoryItem(index) {
            if (index >= 0 && index < inventory.length) {
                const item = inventory[index];
                money += item.price * item.level;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–≤–µ—Å—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∂—É
                updateQuestProgress('sell_items', item.price * item.level);
                
                inventory.splice(index, 1);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç—ã
                selectedForUpgrade = selectedForUpgrade.filter(selected => {
                    if (selected.index > index) {
                        selected.index--; // –°–¥–≤–∏–≥–∞–µ–º –∏–Ω–¥–µ–∫—Å—ã –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ
                        return true;
                    }
                    return selected.index !== index;
                });
                
                updateBalance();
                updateInventory();
                updateUpgradeTab();
                
                // –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–æ–¥–∞–∂–∏
                createConfetti(item.rarity);
            }
        }
        
        // –í—ã–±—Ä–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
        function selectForUpgrade(index) {
            if (index >= 0 && index < inventory.length) {
                const item = inventory[index];
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –≤—ã–±—Ä–∞–Ω –ª–∏ —É–∂–µ —ç—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç
                const selectedIndex = selectedForUpgrade.findIndex(selected => selected.index === index);
                
                if (selectedIndex !== -1) {
                    // –£–±–∏—Ä–∞–µ–º –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
                    selectedForUpgrade.splice(selectedIndex, 1);
                } else {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å (–º–∞–∫—Å–∏–º—É–º 2)
                    if (selectedForUpgrade.length < 2) {
                        selectedForUpgrade.push({ index, item });
                    } else {
                        alert('–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ 2 –ø—Ä–µ–¥–º–µ—Ç–∞ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è!');
                        return;
                    }
                }
                
                updateUpgradeTab();
                updateInventory(); // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è
        function updateUpgradeTab() {
            const upgradeItems = document.getElementById('upgrade-items');
            const upgradeBtn = document.getElementById('perform-upgrade');
            const upgradeProgress = document.getElementById('upgrade-progress');
            const upgradeChance = document.getElementById('upgrade-chance');
            
            upgradeItems.innerHTML = '';
            
            if (selectedForUpgrade.length === 0) {
                upgradeBtn.disabled = true;
                upgradeProgress.style.width = '0%';
                upgradeProgress.textContent = '0%';
                upgradeChance.textContent = '0';
                return;
            }
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
            selectedForUpgrade.forEach((selected, i) => {
                const item = selected.item;
                const itemElement = document.createElement('div');
                itemElement.className = 'upgrade-item';
                itemElement.innerHTML = `
                    <div class="upgrade-item-img">${item.emoji}</div>
                    <div class="upgrade-item-info">
                        <div class="upgrade-item-name">${item.name}</div>
                        <div class="upgrade-item-stats">
                            <span class="upgrade-item-price">${item.price * item.level} ‚ÇΩ</span>
                            <span> ‚Ä¢ –£—Ä. ${item.level}</span>
                        </div>
                        <div>–†–µ–¥–∫–æ—Å—Ç—å: <span class="rarity-${item.rarity}">${getRarityName(item.rarity)}</span></div>
                    </div>
                    <button onclick="selectForUpgrade(${selected.index})">‚úï</button>
                `;
                upgradeItems.appendChild(itemElement);
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ
            let canUpgrade = true;
            let chance = 0;
            let baseLevel = 0;
            
            if (selectedForUpgrade.length === 2) {
                const item1 = selectedForUpgrade[0].item;
                const item2 = selectedForUpgrade[1].item;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É—Ä–æ–≤–Ω–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ
                if (item1.level !== item2.level) {
                    canUpgrade = false;
                } else {
                    baseLevel = item1.level;
                    
                    // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —à–∞–Ω—Å —É–ª—É—á—à–µ–Ω–∏—è
                    const rarity1 = getRarityValue(item1.rarity);
                    const rarity2 = getRarityValue(item2.rarity);
                    
                    // –ë–∞–∑–æ–≤—ã–π —à–∞–Ω—Å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–¥–∫–æ—Å—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –∏—Ö —É—Ä–æ–≤–Ω—è
                    chance = Math.min(90, 50 + (100 - (rarity1 + rarity2)/2) - (baseLevel * 10));
                }
            } else {
                canUpgrade = false;
            }
            
            upgradeBtn.disabled = !canUpgrade;
            
            if (canUpgrade) {
                upgradeProgress.style.width = `${chance}%`;
                upgradeProgress.textContent = `${chance}%`;
                upgradeChance.textContent = chance;
            } else {
                upgradeProgress.style.width = '0%';
                upgradeProgress.textContent = '0%';
                upgradeChance.textContent = '0';
            }
        }
        
        // –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–¥–∫–æ—Å—Ç–∏
        function getRarityName(rarity) {
            switch(rarity) {
                case 'common': return '–û–±—ã—á–Ω–∞—è';
                case 'rare': return '–†–µ–¥–∫–∞—è';
                case 'epic': return '–≠–ø–∏—á–µ—Å–∫–∞—è';
                case 'legendary': return '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∞—è';
                case 'mythic': return '–ú–∏—Ñ–∏—á–µ—Å–∫–∞—è';
                case 'special': return '–û—Å–æ–±–∞—è';
                default: return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è';
            }
        }
        
        // –í—ã–ø–æ–ª–Ω–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ
        function performUpgrade() {
            if (selectedForUpgrade.length !== 2) return;
            
            const index1 = selectedForUpgrade[0].index;
            const index2 = selectedForUpgrade[1].index;
            const item1 = inventory[index1];
            const item2 = inventory[index2];
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø—Ä–µ–¥–º–µ—Ç—ã –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç (–Ω–µ –±—ã–ª–∏ –ø—Ä–æ–¥–∞–Ω—ã –∏ —Ç.–¥.)
            if (!item1 || !item2 || item1.level !== item2.level) {
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏!');
                selectedForUpgrade = [];
                updateUpgradeTab();
                return;
            }
            
            const baseLevel = item1.level;
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —à–∞–Ω—Å —É–ª—É—á—à–µ–Ω–∏—è
            const rarity1 = getRarityValue(item1.rarity);
            const rarity2 = getRarityValue(item2.rarity);
            const chance = Math.min(90, 50 + (100 - (rarity1 + rarity2)/2) - (baseLevel * 10));
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            const success = Math.random() * 100 < chance;
            
            // –£–¥–∞–ª—è–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
            if (index1 > index2) {
                inventory.splice(index1, 1);
                inventory.splice(index2, 1);
            } else {
                inventory.splice(index2, 1);
                inventory.splice(index1, 1);
            }
            
            if (success) {
                // –°–æ–∑–¥–∞–µ–º —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç
                const upgradedItem = {
                    ...item1,
                    level: baseLevel + 1,
                    price: Math.floor(item1.price * 1.5)
                };
                
                inventory.push(upgradedItem);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–≤–µ—Å—Ç –Ω–∞ —É–ª—É—á—à–µ–Ω–∏–µ
                updateQuestProgress('upgrade_items', 1);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø—ã—Ç –∑–∞ —É–ª—É—á—à–µ–Ω–∏–µ
                addXp(20 * baseLevel);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                showUpgradeResult(true, upgradedItem);
            } else {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ—É–¥–∞—á—É
                showUpgradeResult(false);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            selectedForUpgrade = [];
            updateInventory();
            updateUpgradeTab();
            saveGame();
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–ª—É—á—à–µ–Ω–∏—è
        function showUpgradeResult(success, upgradedItem = null) {
            const modal = document.getElementById('upgrade-modal');
            const title = document.getElementById('upgrade-modal-title');
            const text = document.getElementById('upgrade-modal-text');
            const itemContainer = document.getElementById('upgrade-modal-item');
            
            if (success) {
                title.textContent = 'üéâ –£–ª—É—á—à–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ! üéâ';
                text.textContent = `–í—ã –ø–æ–ª—É—á–∏–ª–∏ –ø—Ä–µ–¥–º–µ—Ç ${upgradedItem.name} —É—Ä–æ–≤–Ω—è ${upgradedItem.level}!`;
                
                itemContainer.innerHTML = upgradedItem.emoji;
                itemContainer.style.fontSize = '60px';
                
                // –≠—Ñ—Ñ–µ–∫—Ç —É—Å–ø–µ—Ö–∞
                for (let i = 0; i < 100; i++) {
                    createConfetti(upgradedItem.rarity);
                }
            } else {
                title.textContent = 'üò¢ –£–ª—É—á—à–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å üò¢';
                text.textContent = '–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —É–ª—É—á—à–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å. –í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ –æ–±–∞ –ø—Ä–µ–¥–º–µ—Ç–∞.';
                itemContainer.innerHTML = '‚ùå';
                itemContainer.style.fontSize = '60px';
                
                // –≠—Ñ—Ñ–µ–∫—Ç –Ω–µ—É–¥–∞—á–∏
                createConfetti('common', 30, '#ff3333');
            }
            
            modal.style.display = 'flex';
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–≤–µ—Å—Ç–æ–≤
        function generateQuests() {
            if (quests.length === 0) {
                // –í—ã–±–∏—Ä–∞–µ–º 3 —Å–ª—É—á–∞–π–Ω—ã—Ö –∫–≤–µ—Å—Ç–∞ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
                const availableQuests = allQuests.filter(quest => 
                    !completedQuests.includes(quest.id) && 
                    !quests.some(q => q.id === quest.id)
                );
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–ø–æ reward.xp)
                availableQuests.sort((a, b) => a.reward.xp - b.reward.xp);
                
                // –ë–µ—Ä–µ–º 3 –∫–≤–µ—Å—Ç–∞: –æ–¥–∏–Ω –ª–µ–≥–∫–∏–π, –æ–¥–∏–Ω —Å—Ä–µ–¥–Ω–∏–π, –æ–¥–∏–Ω —Å–ª–æ–∂–Ω—ã–π
                const easyQuests = availableQuests.slice(0, Math.ceil(availableQuests.length / 3));
                const mediumQuests = availableQuests.slice(
                    Math.ceil(availableQuests.length / 3), 
                    Math.ceil(availableQuests.length * 2 / 3)
                );
                const hardQuests = availableQuests.slice(Math.ceil(availableQuests.length * 2 / 3));
                
                if (easyQuests.length > 0) quests.push({...easyQuests[0]});
                if (mediumQuests.length > 0) quests.push({...mediumQuests[0]});
                if (hardQuests.length > 0) quests.push({...hardQuests[0]});
                
                // –ï—Å–ª–∏ –∫–≤–µ—Å—Ç–æ–≤ –º–µ–Ω—å—à–µ 3, –¥–æ–±–∞–≤–ª—è–µ–º –ª—é–±—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ
                while (quests.length < 3 && availableQuests.length > 0) {
                    const randomQuest = availableQuests[Math.floor(Math.random() * availableQuests.length)];
                    if (!quests.some(q => q.id === randomQuest.id)) {
                        quests.push({...randomQuest});
                    }
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–≤–µ—Å—Ç–æ–≤
            quests.forEach(quest => {
                switch(quest.type) {
                    case 'open_cases':
                        quest.current = Math.min(openedCases, quest.target);
                        break;
                    case 'collect_items':
                        quest.current = Math.min(inventory.length, quest.target);
                        break;
                    case 'sell_items':
                        // –î–ª—è —ç—Ç–æ–≥–æ –∫–≤–µ—Å—Ç–∞ current –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ
                        break;
                    case 'upgrade_items':
                        // –î–ª—è —ç—Ç–æ–≥–æ –∫–≤–µ—Å—Ç–∞ current –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏
                        break;
                    case 'open_rare_cases':
                        // –î–ª—è —ç—Ç–æ–≥–æ –∫–≤–µ—Å—Ç–∞ current –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ä–µ–¥–∫–∏—Ö –∫–µ–π—Å–æ–≤
                        break;
                    case 'get_legendary':
                        // –î–ª—è —ç—Ç–æ–≥–æ –∫–≤–µ—Å—Ç–∞ current –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–π —Ñ–∏–≥—É—Ä–∫–∏
                        const legendaryCount = inventory.filter(item => 
                            item.rarity === 'legendary' || item.rarity === 'mythic'
                        ).length;
                        quest.current = Math.min(legendaryCount, quest.target);
                        break;
                }
            });
            
            saveGame();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∫–≤–µ—Å—Ç–∞
        function updateQuestProgress(type, value) {
            let updated = false;
            
            quests.forEach(quest => {
                if (quest.type === type) {
                    quest.current = Math.min(quest.current + value, quest.target);
                    updated = true;
                }
            });
            
            if (updated) {
                updateQuests();
                saveGame();
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–≤–µ—Å—Ç–æ–≤
        function updateQuests() {
            const questsContainer = document.getElementById('quests-container');
            const questsBadge = document.getElementById('quests-badge');
            
            questsContainer.innerHTML = '';
            
            let completedCount = 0;
            
            quests.forEach(quest => {
                const questElement = document.createElement('div');
                questElement.className = 'quest';
                
                const isCompleted = quest.current >= quest.target;
                if (isCompleted) completedCount++;
                
                questElement.innerHTML = `
                    <div class="quest-title">${quest.title}</div>
                    <div class="quest-description">${quest.description}</div>
                    <div class="quest-reward">
                        <span class="quest-reward-icon">üéÅ</span>
                        –ù–∞–≥—Ä–∞–¥–∞: 
                        ${quest.reward.money ? `${quest.reward.money} ‚ÇΩ` : ''}
                        ${quest.reward.keys ? `, ${quest.reward.keys} üîë` : ''}
                        , ${quest.reward.xp} XP
                    </div>
                    <div class="quest-progress">
                        <div class="quest-progress-bar" style="width: ${(quest.current / quest.target) * 100}%"></div>
                    </div>
                    <button class="quest-complete-btn" ${isCompleted ? '' : 'disabled'} 
                            onclick="completeQuest(${quest.id})">
                        ${isCompleted ? '–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É' : '–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ'}
                    </button>
                `;
                
                questsContainer.appendChild(questElement);
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂, –µ—Å–ª–∏ –µ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç—ã
            if (completedCount > 0) {
                questsBadge.textContent = completedCount;
                questsBadge.style.display = 'inline-flex';
            } else {
                questsBadge.style.display = 'none';
            }
        }
        
        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞
        function completeQuest(questId) {
            const questIndex = quests.findIndex(q => q.id === questId);
            
            if (questIndex !== -1 && quests[questIndex].current >= quests[questIndex].target) {
                const quest = quests[questIndex];
                
                // –í—ã–¥–∞–µ–º –Ω–∞–≥—Ä–∞–¥—É
                if (quest.reward.money) {
                    money += quest.reward.money;
                }
                
                if (quest.reward.keys) {
                    keys += quest.reward.keys;
                }
                
                addXp(quest.reward.xp);
                
                // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–≤–µ—Å—Ç –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
                completedQuests.push(quest.id);
                quests.splice(questIndex, 1);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –Ω–∞–≥—Ä–∞–¥–æ–π
                document.getElementById('quest-complete-modal-text').textContent = 
                    `–í—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ –∑–∞–¥–∞–Ω–∏–µ "${quest.title}" –∏ –ø–æ–ª—É—á–∏–ª–∏: ${quest.reward.money ? `${quest.reward.money} ‚ÇΩ` : ''} ${quest.reward.keys ? `${quest.reward.keys} –∫–ª—é—á–µ–π` : ''} ${quest.reward.xp} –æ–ø—ã—Ç–∞!`;
                document.getElementById('quest-complete-modal-item').textContent = 'üéÅ';
                document.getElementById('quest-complete-modal').style.display = 'flex';
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ –∫–≤–µ—Å—Ç—ã, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                generateQuests();
                updateQuests();
                updateBalance();
                saveGame();
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞
        function checkDailyBonus() {
            const now = new Date();
            const today = now.toDateString();
            
            if (lastDailyBonusDate) {
                const lastDate = new Date(lastDailyBonusDate).toDateString();
                dailyBonusAvailable = lastDate !== today;
            } else {
                dailyBonusAvailable = true;
            }
            
            const dailyBonusBtn = document.getElementById('daily-bonus-btn');
            
            if (dailyBonusAvailable) {
                dailyBonusBtn.textContent = '–ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å';
                dailyBonusBtn.disabled = false;
            } else {
                dailyBonusBtn.disabled = true;
                startDailyBonusTimer();
            }
        }
        
        // –¢–∞–π–º–µ—Ä –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞
        function startDailyBonusTimer() {
            const dailyBonusBtn = document.getElementById('daily-bonus-btn');
            
            if (!dailyBonusAvailable) {
                const now = new Date();
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(0, 0, 0, 0);
                
                const diff = tomorrow - now;
                
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                dailyBonusBtn.textContent = `–ü–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                setTimeout(startDailyBonusTimer, 1000);
            }
        }
        
        // –ü–æ–ª—É—á–∏—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å
        function claimDailyBonus() {
            if (dailyBonusAvailable) {
                const bonusAmount = 500 + level * 100;
                money += bonusAmount;
                addXp(50);
                
                lastDailyBonusDate = new Date();
                dailyBonusAvailable = false;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –±–æ–Ω—É—Å–æ–º
                document.getElementById('daily-bonus-modal-text').textContent = 
                    `–í—ã –ø–æ–ª—É—á–∏–ª–∏ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å: ${bonusAmount} ‚ÇΩ –∏ 50 –æ–ø—ã—Ç–∞!`;
                document.getElementById('daily-bonus-modal-item').textContent = 'üí∞';
                document.getElementById('daily-bonus-modal').style.display = 'flex';
                
                checkDailyBonus();
                updateBalance();
                saveGame();
            }
        }
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø—ã—Ç–∞
        function addXp(amount) {
            xp += amount;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏ –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
            while (xp >= nextLevelXp) {
                xp -= nextLevelXp;
                level++;
                nextLevelXp = Math.floor(nextLevelXp * 1.5);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
                document.getElementById('level-up-modal-text').textContent = 
                    `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ ${level} —É—Ä–æ–≤–Ω—è!`;
                document.getElementById('level-up-modal').style.display = 'flex';
                
                // –≠—Ñ—Ñ–µ–∫—Ç –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
                for (let i = 0; i < 200; i++) {
                    createConfetti('legendary');
                }
            }
            
            updateBalance();
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
        }
        
        // –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
        function createConfetti(rarity, count = 50, color = null) {
            if (!color) {
                switch(rarity) {
                    case 'common': color = '#aaa'; break;
                    case 'rare': color = '#4d88ff'; break;
                    case 'epic': color = '#b347ea'; break;
                    case 'legendary': color = '#ffaa00'; break;
                    case 'mythic': color = '#ff3366'; break;
                    case 'special': color = '#33cc99'; break;
                    default: color = '#ffcc00';
                }
            }
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.backgroundColor = color;
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                
                document.body.appendChild(confetti);
                
                // –£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            initGame();
            
            // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞
            document.getElementById('daily-bonus-btn').addEventListener('click', claimDailyBonus);
        };
    </script>
</body>
</html>
